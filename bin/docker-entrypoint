#!/bin/bash -e

# In a production environment, we need to ensure the database is ready and migrated.
# This runs for both the web and worker services.
if [ "$RAILS_ENV" = "production" ]; then
  echo "Production environment detected. Preparing database..."
  bin/rails db:prepare
  echo "Database is ready."
fi

exec "${@}"
